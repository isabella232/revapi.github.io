
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2018-04-06
 Rendered using Msb3 Maven Skin 0.1.1 (http://tunguski.github.io/msb3-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Revapi Maven Plugin - Revapi Maven Plugin</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://bootswatch.com/3/cosmo/bootstrap.min.css" rel="stylesheet" />
		<link href="./css/bootswatch.css" rel="stylesheet" />
		<link href="./css/msb3-skin.css" rel="stylesheet" />

		<link href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/default.min.css" rel="stylesheet" />

		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
<script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>(adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-3133590320590126",
          enable_page_level_ads: true
        });</script>
<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-57095904-1', 'auto');
        ga('send', 'pageview');</script>
<link rel="alternate" href="https://revapi.org/news.atom" type="application/rss+xml" title="Revapi News"/>
	</head>

	<body class="page-index project-revapi-maven-plugin" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<header class="navbar navbar-default navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<a class="navbar-toggle collapsed" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="navbar-brand" href="../..">Revapi</a>
				</div>
					<div class="collapse navbar-collapse" id="top-nav-collapse">
						<ul class="nav navbar-nav navbar-right">
							<li ><a href="https://diff.revapi.org" title="Online Check" class="externalLink">Online Check</a></li>
							<li ><a href="../../news.html" title="News">News</a></li>
							<li ><a href="../../getting-started.html" title="Getting Started">Getting Started</a></li>
							<li ><a href="../../downloads.html" title="Downloads">Downloads</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Basic Info <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../../architecture.html" title="Architecture">Architecture</a></li>
									<li ><a href="../../building.html" title="Building">Building</a></li>
									<li ><a href="../../extensions.html" title="Extensions">Extensions</a></li>
								</ul>
							</li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Sub Projects <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../revapi/index.html" title="Revapi API">Revapi API</a></li>
									<li ><a href="../revapi-ant-task/index.html" title="Ant Task">Ant Task</a></li>
									<li ><a href="../revapi-basic-features/index.html" title="Basic Features">Basic Features</a></li>
									<li ><a href="../revapi-java/index.html" title="Java Extension">Java Extension</a></li>
									<li ><a href="../revapi-java-spi/index.html" title="Java Extension SPI">Java Extension SPI</a></li>
									<li ><a href="../revapi-java-test-support/index.html" title="Java Test Support">Java Test Support</a></li>
									<li ><a href="../revapi-reporter-text/index.html" title="Text Report Extension">Text Report Extension</a></li>
									<li class="active"><a href="" title="Maven Plugin">Maven Plugin</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
			</div>
		</header>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron">
		<div class="row">
			<div class="col-md-12">
				<div class="pull-left">
					<a href="https://revapi.org/modules/revapi-maven-plugin" id="bannerLeft"><h1>Revapi Maven Plugin</h1></a>
					<p class="lead">Maven integration for Revapi.</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="col-md-8">
			<div class="body-content">
<div class="page-header">
 <h1 id="revapi_maven_plugin">Revapi Maven Plugin</h1>
</div> 
<div id="preamble"> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>Revapi Maven plugin enables API checks during the Maven build. By default, it checks the currently built project against the its latest released version (as reported by Maven). Alternatively, the two artifacts to can be set arbitrarily.</p> 
  </div> 
  <div class="paragraph"> 
   <p>The plugin offers the following Maven goals:</p> 
  </div> 
  <div class="ulist"> 
   <ul> 
    <li> <p><a href="check-mojo.html">revapi:check</a> is used as part of the build to ensure a configurable level of compatibility.</p> </li> 
    <li> <p><a href="report-mojo.html">revapi:report</a> generates a simple report for the project’s maven-generated site.</p> </li> 
    <li> <p><a href="report-aggregate-mojo.html">revapi:report-aggregate</a> runs a report on all projects in a reactor using a configuration supplied at the top-level aggregator project.</p> </li> 
    <li> <p><a href="validate-configuration-mojo.html">revapi:validate-configuration</a> validates the configuration of Revapi (use this to debug problems with the configuration).</p> </li> 
    <li> <p><a href="update-versions-mojo.html">revapi:update-versions</a> updates the version string in pom.xml according to <a href="http://semver.org">semver</a> rules.</p> </li> 
    <li> <p><a href="update-release-properties-mojo.html">revapi:update-release-properties</a> updates the <code>release.properties</code> file with the release and development versions as determined by Revapi according to the <a href="http://semver.org">semver</a> rules.</p> </li> 
   </ul> 
  </div> 
  <div class="paragraph"> 
   <p>The full description of all available goals is located <a href="plugin-info.html">here</a>.</p> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="usage">Usage</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>Revapi maven plugin is very simple to use. Just define what revapi extensions should be used, what artifacts to compare and off you go. See the <a href="#examples">examples</a> section, below.</p> 
  </div> 
  <div class="paragraph"> 
   <p>In case you still have questions regarding the plugin’s usage, please feel free to contact the <a href="mail-lists.html">user mailing list</a>. The posts to the mailing list are archived and could already contain the answer to your question as part of an older thread. Hence, it is also worth browsing/searching the <a href="mail-lists.html">mail archive</a>.</p> 
  </div> 
  <div class="paragraph"> 
   <p>If you feel like the plugin is missing a feature or has a defect, you can fill a feature request or bug report in our <a href="issue-tracking.html">issue tracker</a>. When creating a new issue, please provide a comprehensive description of your concern. Especially for fixing bugs it is crucial that the developers can reproduce your problem. For this reason, entire debug logs, POMs or most preferably little demo projects attached to the issue are very much appreciated. Of course, patches are most welcome, too. Contributors can check out the project from our <a href="source-repository.html">source repository</a> and will find supplementary information in the <a href="http://maven.apache.org/guides/development/guide-helping.html">guide to helping with Maven</a>.</p> 
  </div> 
  <div class="sect2"> 
   <h3 id="examples">Examples</h3> 
   <div class="paragraph"> 
    <p>The list of extensions you want to use with Revapi is provided to it as plugin dependencies. Usually you will want to check the API of your java archives, so this is the minimal configuration you need to provide to revapi (note that the <a href="../revapi-basic-features/index.html">basic features</a> extension is implicitly present because without it Revapi can do literally nothing).</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;...&lt;/version&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.revapi&lt;/groupId&gt;
      &lt;artifactId&gt;revapi-java&lt;/artifactId&gt;
      &lt;version&gt;...&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;goals&gt;&lt;goal&gt;check&lt;/goal&gt;&lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="specifying_versions_to_check">Specifying Versions To Check</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>By default, Revapi will automagically figure out the latest released version of your project and check the code that’s been built against it.</p> 
  </div> 
  <div class="paragraph"> 
   <p>This is assumed to be the most common usecase and as such requires no additional configuration. But it always is not exactly what you want.</p> 
  </div> 
  <div class="sect2"> 
   <h3 id="specific_old_version">Specific Old Version</h3> 
   <div class="paragraph"> 
    <p>You can choose to explicitly select the old version to check. This is useful in scenarios where you need tell specifically the old version and Maven rules for determining the latest release does not pick the right one.</p> 
   </div> 
   <div class="paragraph"> 
    <p>You can use one of the following configuration parameters of Revapi maven plugin:</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p><code>oldArtifacts</code> - This can be used to precisely specify the GAV (or more GAVs) of the artifact(s) representing your old version.</p> </li> 
     <li> <p><code>oldVersion</code> - Using this, Revapi will reuse the groupId, artifactId, type and classifier of your currently built artifact and will use the specified version. I.e. using this, you can easily specify the older version of your artifact to check against.</p> </li> 
    </ul> 
   </div> 
   <div class="paragraph"> 
    <p>Both of these parameters have their command-line names, too. Please consult the <code>check</code> goal <a href="check-mojo.html">docs</a> for details.</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="specific_new_version">Specific New Version</h3> 
   <div class="paragraph"> 
    <p>This is not a very common usecase but you can also specify the new version of the API (i.e. something different than what the Maven just built). Use <code>newArtifacts</code> or <code>newVersion</code> parameters with similar meaning to the <code>old</code> variants.</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="leaving_out_pre_releases">Leaving Out Pre-releases</h3> 
   <div class="paragraph"> 
    <p>Frequently, you will release alpha or beta versions before you release the final version of your project. Maven will consider any non-snapshot release as the latest, but that’s possibly not what you want to check against.</p> 
   </div> 
   <div class="paragraph"> 
    <p>After you release a beta, you still want your project to be checked against the last final release, not against the beta.</p> 
   </div> 
   <div class="paragraph"> 
    <p>You could explicitly specify the <code>oldVersion</code> to be your last final release but the caveat of that is that you will have to remember to change that after you release your new final release (so that your new final release becomes the new baseline for the future development).</p> 
   </div> 
   <div class="paragraph"> 
    <p>There is a simpler way though.</p> 
   </div> 
   <div class="paragraph"> 
    <p>You can use the <code>versionFormat</code> <a href="check-mojo.html#versionFormat">configuration parameter</a> to specify how the version string of the latest release must look like.</p> 
   </div> 
   <div class="paragraph"> 
    <p>For example if you use "GA" as the suffix of your final releases and you released <code>1.0.GA</code>, <code>2.0.Alpha</code> and <code>2.0.Beta</code>, you can configure Revapi maven plugin like this:</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;configuration&gt;
  &lt;versionFormat&gt;.*\.GA&lt;/versionFormat&gt;
&lt;/configuration&gt;</code></pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>and Revapi will use the latest release that matches that regular expression (which would be <code>1.0.GA</code>) instead of the latest release as reported by Maven (which would be <code>2.0.Beta</code>).</p> 
   </div> 
   <div class="paragraph"> 
    <p>Note that the version format applies to both old and new versions and is only taken into account if the version string is one of the Maven’s special version specifiers - <code>RELEASE</code> or <code>LATEST</code> (<code>RELEASE</code> is the default value of <code>oldVersion</code> configuration parameter, so the above configuration will take effect).</p> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="how_to_configure_revapi">How to Configure Revapi</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>The maven plugin itself is configured using the properties of the <a href="plugin-info.html">goals</a>. The configuration of the API analysis is a matter of configuring different Revapi extensions that are to be run. This is done using the <code>analysisConfiguration</code> element in the Maven plugin’s configuration. This element contains the configuration of the individual extensions in either XML or JSON.</p> 
  </div> 
  <div class="sect2"> 
   <h3 id="specifying_the_analysis_configuration_using_xml">Specifying The Analysis Configuration Using XML</h3> 
   <div class="sect3"> 
    <h4 id="ignoring_classes">Ignoring classes</h4> 
    <div class="paragraph"> 
     <p>As an example, let’s configure the java extension to ignore the classes it finds missing from the API rather than reporting them and also only include the archives with <code>com.acme</code> groupId in the analysis::</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;...&lt;/version&gt;
  &lt;configuration&gt;
    &lt;analysisConfiguration&gt;
      &lt;revapi.java&gt;
        &lt;missing-classes&gt;
          &lt;behavior&gt;ignore&lt;/behavior&gt;
        &lt;/missing-classes&gt;
      &lt;/revapi.java&gt;
      &lt;revapi.filter&gt;
        &lt;archives&gt;
          &lt;include&gt;
            &lt;item&gt;com\.acme:.*&lt;/item&gt;
          &lt;/include&gt;
        &lt;/archives&gt;
      &lt;/revapi.filter&gt;
    &lt;/analysisConfiguration&gt;
  &lt;/configuration&gt;</code></pre> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Each extension has a unique "extension id" which is used as the root tag for its configuration under the <code>analysisConfiguration</code> tag. Under the extension configuration’s root tag an XML representation of the configuration as specified by the extension documentation (and JSON schema - yes, the XML is validated against a JSON schema ;) ).</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="failing_level">Failing level</h4> 
    <div class="paragraph"> 
     <p>By default, <code>mvn revapi:check</code> fails if at least one potentially breaking change is found. To fail only for breaking changes, one has to set up <code>failSeverity</code> as follows.</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code>&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;failSeverity&gt;breaking&lt;/failSeverity&gt;
    ...</code></pre> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="multiple_configurations_per_extension">Multiple Configurations Per Extension</h4> 
    <div class="paragraph"> 
     <p>There can be multiple configurations for a single extension. Optionally, each extension configuration "instance" can be assigned an ID such that it can be effectively merged (see below).</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;...&lt;/version&gt;
  ...
  &lt;configuration&gt;
    &lt;analysisConfiguration&gt;
      &lt;revapi.reporter.text id="stdout"&gt;
        &lt;output&gt;out&lt;/output&gt;
      &lt;/revapi.reporter.text&gt;
      &lt;revapi.reporter.text id="custom-report"&gt;
        &lt;output&gt;${project.build.directory}/revapi-custom-report.xml&lt;/output&gt;
        &lt;template&gt;${custom-report.template.location}&lt;/template&gt;
      &lt;/revapi.reporter.text&gt;
    &lt;/analysisConfiguration&gt;
  &lt;/configuration&gt;</code></pre> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>This configuration will cause the Revapi’s text reporter (if is included as a dependency of the plugin) to output the results of the analysis both to standard output and a custom file using a custom template.</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="analysis_configuration_and_maven_inheritance">Analysis Configuration And Maven Inheritance</h4> 
    <div class="paragraph"> 
     <p>Having the Revapi analysis configuration specified in XML enables Maven to apply its configuration inheritance logic to Revapi analysis configuration, too.</p> 
    </div> 
    <div class="paragraph"> 
     <p>Here is a couple of tips on how to make the Maven configuration inheritance work nice with Revapi analysis configuration.</p> 
    </div> 
    <div class="admonitionblock tip"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> 
         <div class="title">
           Tip 
         </div> </td> 
        <td class="content"> <a href="http://maven.apache.org/plugins/maven-help-plugin/effective-pom-mojo.html"><code>mvn help:effective-pom</code></a>, <a href="https://maven.apache.org/pom.html#Plugins"><code>combine.self</code> and <code>combine.children</code></a> are your friends when inheriting more complex analysis configurations. </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="one_configuration_per_extension">One Configuration Per Extension</h4> 
    <div class="paragraph"> 
     <p>Parent POM:</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;analysisConfiguration&gt;
      &lt;revapi.ignore&gt;
        &lt;item&gt;
          &lt;code&gt;java.class.removed&lt;/code&gt;
        &lt;/item&gt;
        &lt;item&gt;
          &lt;code&gt;java.class.added&lt;/code&gt;
        &lt;/item&gt;
      &lt;/revapi.ignore&gt;
    &lt;/analysisConfiguration&gt;
  &lt;/configuration&gt;
  ...</code></pre> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Child POM:</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;analysisConfiguration&gt;
      &lt;revapi.ignore&gt;
        &lt;item&gt;
          &lt;code&gt;java.class.nowFinal&lt;/code&gt;
        &lt;/item&gt;
      &lt;/revapi.ignore&gt;
    &lt;/analysisConfiguration&gt;
  &lt;/configuration&gt;
  ...</code></pre> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Effective Child POM:</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;analysisConfiguration&gt;
      &lt;revapi.ignore&gt;
        &lt;item&gt;
          &lt;code&gt;java.class.nowFinal&lt;/code&gt;
        &lt;/item&gt;
      &lt;/revapi.ignore&gt;
    &lt;/analysisConfiguration&gt;
  &lt;/configuration&gt;
  ...</code></pre> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Notice that <code>revapi.ignore</code> doesn’t contain the <code>item</code>s defined in the parent POM. That is the default Maven behavior. To be able to inherit the configuration of the <code>revapi.ignore</code> extension from the parent POM, you have to specify how to merge the `item`s in the child POM like so:</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;analysisConfiguration&gt;
      &lt;revapi.ignore combine.children="append"&gt;
        &lt;item&gt;
          &lt;code&gt;java.class.nowFinal&lt;/code&gt;
        &lt;/item&gt;
      &lt;/revapi.ignore&gt;
    &lt;/analysisConfiguration&gt;
  &lt;/configuration&gt;
  ...</code></pre> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>After that, the effective child POM will indeed contain configuration combined from both parent and child:</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;analysisConfiguration&gt;
      &lt;revapi.ignore&gt;
        &lt;item&gt;
          &lt;code&gt;java.class.nowFinal&lt;/code&gt;
        &lt;/item&gt;
        &lt;item&gt;
          &lt;code&gt;java.class.removed&lt;/code&gt;
        &lt;/item&gt;
        &lt;item&gt;
          &lt;code&gt;java.class.added&lt;/code&gt;
        &lt;/item&gt;
      &lt;/revapi.ignore&gt;
    &lt;/analysisConfiguration&gt;
  &lt;/configuration&gt;
  ...</code></pre> 
     </div> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="multiple_configurations_per_extension_2">Multiple Configurations Per Extension</h4> 
    <div class="paragraph"> 
     <p>As mentioned in the previous chapters, revapi supports multiple configurations per extension. This gets a little bit complicated in conjunction with inheritance. Let’s see an example.</p> 
    </div> 
    <div class="paragraph"> 
     <p>Parent POM</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;...&lt;/version&gt;
  ...
  &lt;configuration&gt;
    &lt;analysisConfiguration&gt;
      &lt;revapi.reporter.text id="stdout"&gt;
        &lt;output&gt;out&lt;/output&gt;
      &lt;/revapi.reporter.text&gt;
      &lt;revapi.reporter.text id="custom-report"&gt;
        &lt;output&gt;${project.build.directory}/revapi-custom-report.xml&lt;/output&gt;
        &lt;template&gt;${custom-report.template.location}&lt;/template&gt;
      &lt;/revapi.reporter.text&gt;
    &lt;/analysisConfiguration&gt;
  &lt;/configuration&gt;</code></pre> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Child POM</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;...&lt;/version&gt;
  ...
  &lt;configuration&gt;
    &lt;analysisConfiguration&gt;
      &lt;revapi.reporter.text id="stdout"&gt;
        &lt;output&gt;err&lt;/output&gt;
      &lt;/revapi.reporter.text&gt;
    &lt;/analysisConfiguration&gt;
  &lt;/configuration&gt;</code></pre> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>I.e. the child POM wants to reconfigure the "stdout" configuration of revapi text reporter to report to standard error output instead of the standard output.</p> 
    </div> 
    <div class="paragraph"> 
     <p>If we inspect the effective child POM, we’ll see this though:</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;...&lt;/version&gt;
  ...
  &lt;configuration&gt;
    &lt;analysisConfiguration&gt;
      &lt;revapi.reporter.text id="stdout"&gt;
        &lt;output&gt;err&lt;/output&gt;
      &lt;/revapi.reporter.text&gt;
    &lt;/analysisConfiguration&gt;
  &lt;/configuration&gt;</code></pre> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>I.e. the configuration for the custom output is lost in the child POM (again, this is standard Maven behavior. These are just examples to save you from ripping your hair out unnecessarily ;) ). To also inherit the other reporter configuration, you have to mention it like this in the child POM</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;...&lt;/version&gt;
  ...
  &lt;configuration&gt;
    &lt;analysisConfiguration&gt;
      &lt;revapi.reporter.text id="stdout"&gt;
        &lt;output&gt;err&lt;/output&gt;
      &lt;/revapi.reporter.text&gt;
      &lt;revapi.reporter.text id="custom-report"/&gt;
    &lt;/analysisConfiguration&gt;
  &lt;/configuration&gt;</code></pre> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>Now the effective child POM contains the custom report configuration as well as the modified stdout configuration.</p> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="specifying_the_analysis_configuration_using_json">Specifying The Analysis Configuration Using JSON</h3> 
   <div class="paragraph"> 
    <p>Revapi has been around for a little bit and over the time it has evolved. Originally (up until Revapi API 0.8.0), each extension was instantiated exactly once and therefore also configured exactly once. Since Revapi API 0.8.0, supported by Revapi Maven plugin 0.9.0, there can be multiple configurations for each extension (and the extension can be therefore instantiated multiple times). This brings the ability to e.g. have 2 differently configured text reporter instances, each generating a different kind of output. Unfortunately, this complicates the configuration, because it is no longer possible to have a single "configuration tree" where extensions would read their configurations from their declared locations.</p> 
   </div> 
   <div class="paragraph"> 
    <p>Therefore, since Revapi API 0.8.0 there is a new kind of JSON format for configuration (which in turn also enables maven plugin to support XML configuration btw). To ease the migration to the new versions, the old configuration format is still supported (but mixing the two formats can lead to unresolvable situations, see the <a href="#multi_file_configuration">Multi-file Configuration</a> section for more details).</p> 
   </div> 
   <div class="sect3"> 
    <h4 id="the_json_configuration_format">The JSON Configuration Format</h4> 
    <div class="paragraph"> 
     <p>As explained above, each extension can be configured multiple times. To support this in JSON, the JSON configuration looks like this:</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-javascript" data-lang="javascript">[
  {
    "extension": "revapi.reporter.text",
    "id": "optional-id",
    "configuration": {
      ... the actual configuration of the extension according to its schema ...
    }
  },
  {
    "extension": "revapi.reporter.text",
    "configuration": {
      ...
    }
  },
  {
    "extension": "revapi.ignore",
    "configuration": {
      ...
    }
  },
  ...
]</code></pre> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>The configuration object is a list. The members of the list are individual configurations for the extensions. The extension being configured is specified by the <code>extension</code> key and the configuration (conforming to the schema specified by the extension) is present under the <code>configuration</code> key.</p> 
    </div> 
    <div class="paragraph"> 
     <p>The optional <code>id</code> key is useful if there are multiple configuration sources (see <a href="#multi_file_configuration">multi file configuration</a> for example) as it affects how the configurations from the different sources are merged together.</p> 
    </div> 
   </div> 
   <div class="sect3"> 
    <h4 id="the_legacy_json_configuration_format">The Legacy JSON Configuration Format</h4> 
    <div class="admonitionblock warning"> 
     <table> 
      <tbody> 
       <tr> 
        <td class="icon"> 
         <div class="title">
           Warning 
         </div> </td> 
        <td class="content"> This describes the obsolete JSON configuration format that cannot handle multiple configurations per extension. If you still use it, rest assured that it is still supported (with the exception of certain scenarios during merging of multiple configuration sources) but you are encouraged to start using the new configuration format. </td> 
       </tr> 
      </tbody> 
     </table> 
    </div> 
    <div class="paragraph"> 
     <p>The JSON data contains the configuration of all the extensions. Each of the extensions declares a "root" in the JSON data from which it reads its configuration (for example, ignoring specific problems found during the analysis can be done using the <code>IgnoreDifferenceTransform</code> extension from the <a href="../revapi-basic-features/index.html">basic features</a> under the root <code>revapi.ignore</code>).</p> 
    </div> 
    <div class="paragraph"> 
     <p>So, without further ado, let’s configure the java extension to report the classes it finds missing from the API rather than failing the analysis upon encountering them and also only include the archives with <code>com.acme</code> groupId in the analysis:</p> 
    </div> 
    <div class="listingblock"> 
     <div class="content"> 
      <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;...&lt;/version&gt;
  &lt;configuration&gt;
    &lt;analysisConfiguration&gt;&lt;![CDATA[
      {
        "revapi": {
          "java": {
            "missing-classes": {
              "behavior": "report"
            }
          },
          "filter": {
            "archives": {
              "include": ["com\\.acme:.*"]
            }
          }
        }
      }
    ]]&gt;&lt;/analysisConfiguration&gt;
  &lt;/configuration&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;goals&gt;&lt;goal&gt;check&lt;/goal&gt;&lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;</code></pre> 
     </div> 
    </div> 
    <div class="paragraph"> 
     <p>The configuration options of the various extensions can be found in their respective docs: <a href="../revapi-basic-features/index.html">basic features documentation</a>, <a href="../revapi-java/index.html">java extension documentation</a>.</p> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="evolving_the_library_using_semver_rules">Evolving The Library Using Semver Rules</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>By default Revapi will report all API changes of configured severity (by default "potentiallyBreaking") and the maven plugin will break the build if such differences are found since the last released version.</p> 
  </div> 
  <div class="paragraph"> 
   <p>One then has to somehow "persuade" the plugin to let the build pass again. One way of doing it is to use the <a href="../revapi-basic-features/extensions/ignore.html">ignore extension</a> and list all the changes and provide them with a "justification" for why such change happened.</p> 
  </div> 
  <div class="paragraph"> 
   <p>This is very rigorous but also laborious approach that isn’t always worth the effort - especially in the early stages of development. Also one can argue that any change made to the codebase is intentional and therefore specifically listing it somewhere in a file that would justify such change to a tool is superfluous. On the other such strict policy might be required for some critical libraries that require high level of stability and any change should be vetted and approved.</p> 
  </div> 
  <div class="paragraph"> 
   <p>There is also another way though. One can use the combination of the <a href="../revapi-basic-features/extensions/semver-ignore.html">semver-ignore extension</a> and the <a href="#updating_version_in_code_pom_xml_code">update-versions goal</a> to (semi-)automatically increase the version of the library even during the development such that its version corresponds to the API changes it contains since the last released version. No other action like listing the and justifying the changes is necessary in this case.</p> 
  </div> 
  <div class="paragraph"> 
   <p>For that you need to configure Revapi maven plugin to use and enable the <a href="../revapi-basic-features/extensions/semver-ignore.html">semver-ignore extension</a>:</p> 
  </div> 
  <div class="listingblock"> 
   <div class="content"> 
    <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;build&gt;
    &lt;plugin&gt;
        &lt;groupId&gt;org.revapi&lt;/groupId&gt;
        &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
        &lt;configuration&gt;
            &lt;analysisConfiguration&gt;&lt;![CDATA[
                {
                  "revapi": {
                    "semver": {
                      "ignore": {
                        "enabled": true
                      }
                    }
                  }
                }
            ]]&gt;&lt;/analysisConfiguration&gt;
        &lt;/configuration&gt;
    &lt;/plugin&gt;
&lt;/build&gt;</code></pre> 
   </div> 
  </div> 
  <div class="paragraph"> 
   <p>Then, when you try to build your project, revapi might find a change that is incompatible with the current version increase (like an API breaking change when you only increased a micro version since the last release) and fail your build. At that moment, it is enough to invoke:</p> 
  </div> 
  <div class="listingblock"> 
   <div class="content"> 
    <pre class="highlight"><code>mvn revapi:update-versions</code></pre> 
   </div> 
  </div> 
  <div class="paragraph"> 
   <p>and the version will be updated to reflect the API changes made. When you build the project again, the build should pass.</p> 
  </div> 
  <div class="admonitionblock note"> 
   <table> 
    <tbody> 
     <tr> 
      <td class="icon"> 
       <div class="title">
         Note 
       </div> </td> 
      <td class="content"> You can even embed the <code>update-versions</code> goal in your regular build and have the versions increase automagically (at the cost of having to run the build twice when an incompatible change is made). </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="multi_file_configuration">Multi-file Configuration</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>Sometimes it can be handy to split the configuration of Revapi analysis in separate files - this can be done for various reasons - you might want to keep the config of different extensions separate or you want to compose the config from various contributing locations, etc.</p> 
  </div> 
  <div class="paragraph"> 
   <p>For Revapi, this can be achieved by using the <code>analysisConfigurationFiles</code> configuration element instead of (or in addition to) the <code>analysisConfiguration</code> element which provides the in-POM way of configuring Revapi.</p> 
  </div> 
  <div class="listingblock"> 
   <div class="content"> 
    <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.revapi&lt;/groupId&gt;
    &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;...&lt;/version&gt;
    ...
    &lt;configuration&gt;
        &lt;analysisConfigurationFiles&gt;
            &lt;file&gt;${project.basedir}/config/filter.json&lt;/file&gt;
            &lt;file&gt;${project.basedir}/config/ignore.xml&lt;/file&gt;
        &lt;/analysisConfigurationFiles&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;&lt;goal&gt;check&lt;/goal&gt;&lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre> 
   </div> 
  </div> 
  <div class="paragraph"> 
   <p>Each of the configuration files (e.g. <code>filter.json</code> and <code>ignore.xml</code> in the above example) is a JSON or XML document with the configuration. The maven plugin then merges the files together (in an unspecified order) and uses the result as the final configuration for the analysis.</p> 
  </div> 
  <div class="sect2"> 
   <h3 id="using_configuration_defined_in_other_modules">Using Configuration Defined In Other Modules</h3> 
   <div class="paragraph"> 
    <p>It is possible to define a JAR artifact that contains "common" configuration of the Revapi analysis shared by many modules. To reference it, simply add the artifact as a dependency of the revapi maven plugin and reference the configuration file inside that artifact like:</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.revapi&lt;/groupId&gt;
    &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;...&lt;/version&gt;
    &lt;dependencies&gt;
      ...
      &lt;dependency&gt;
        &lt;groupId&gt;my.group.id&lt;/groupId&gt;
        &lt;artifactId&gt;artifact-with-common-config&lt;/artifact&gt;
        &lt;version&gt;...&lt;/version&gt;
      &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;configuration&gt;
        &lt;analysisConfigurationFiles&gt;
          &lt;configurationFile&gt;
            &lt;resource&gt;path/to/the/config/file/in/the/shared/artifact&lt;/resource&gt;
          &lt;/configurationFile&gt;
          ...
        &lt;/analysisConfigurationFiles&gt;
        ...
    &lt;/configuration&gt;
    ...
&lt;/plugin&gt;</code></pre> 
    </div> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="merging_configuration_from_multiple_files">Merging Configuration From Multiple Files</h3> 
   <div class="paragraph"> 
    <p>When the analysis configuration is split amongst several files, it needs to be merged together before it is applied to the Revapi extensions. This process is slightly complex with the ability for a single extension to be configured multiple times but in the end is somewhat similar to the way Maven merges the executions of a plugin - as long as the executions are defined once in the effective POM, they don’t need to be assigned IDs. If there are multiple executions and you override them in child POMs, they need to have the IDs assigned so that it is clear what executions in child POM need to be merged with what executions in the parent POM.</p> 
   </div> 
   <div class="paragraph"> 
    <p>In Revapi, too, an extension configuration can optionally have an ID. In JSON this is expressed like this:</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-javascript" data-lang="javascript">...
    {
      "extension": "my.extension",
      "id": "id",
      "configuration": ...
    }
...</code></pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>and in XML like so:</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-xml" data-lang="xml">...
    &lt;my.extension id="myid"&gt;
      ...
    &lt;/my.extension&gt;
...</code></pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>When merging configurations without an explicit ID, everything works as long as there is at most a single configuration for each extension in each configuration file to be merged. As soon as there is more than one configuration for some extension in one of the configuration files, you need to assign IDs to the configurations of that extension so that it is clear what configs should be merged with what.</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="custom_root_element_of_configuration">Custom Root Element of Configuration</h3> 
   <div class="paragraph"> 
    <p>It might sometimes be useful to be able to only use a part of a JSON document as configuration for Revapi. This might be because the same file might be used for holding other data, too, or because the file(s) contain(s) multiple Revapi configurations. Note that the custom root is only applicable to configuration files, not the in-POM configuration.</p> 
   </div> 
   <div class="paragraph"> 
    <p>The below example illustrates the usage of the custom configuration root.</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.revapi&lt;/groupId&gt;
    &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;...&lt;/version&gt;
    ...
    &lt;configuration&gt;
        &lt;analysisConfigurationFiles&gt;
            &lt;file&gt;${project.basedir}/config/filter.json&lt;/file&gt;
            &lt;file&gt;${project.basedir}/config/ignore.json&lt;/file&gt;
            &lt;file&gt;
              &lt;path&gt;${project.basedir}/config/json-data-for-many-things.json&lt;/path&gt;
              &lt;roots&gt;
                &lt;root&gt;configuration/revapi&lt;/root&gt;
              &lt;/roots&gt;
            &lt;/file&gt;
            &lt;file&gt;
              &lt;path&gt;${project.basedir}/config/xml-data-for-many-things.xml&lt;/path&gt;
              &lt;roots&gt;
                &lt;root&gt;configuration/revapi&lt;/root&gt;
              &lt;/roots&gt;
            &lt;/file&gt;
        &lt;/analysisConfigurationFiles&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;&lt;goal&gt;check&lt;/goal&gt;&lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>The above would read the configuration from the <code>filter.json</code> and <code>ignore.json</code> files. In addition it would also read the configuration from the <code>json-data-for-many-things.json</code> and <code>xml-data-for-many-things.xml</code> files but would only consider the data from the "configuration/revapi" subpath in those file. E.g. if the files looked like:</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-javascript" data-lang="javascript">{
  "itest-setup": {...},
  "configuration": {
    "our-custom-tool": {
    },
    "revapi": {
      ... HERE WE ARE ...
    }
  }
}</code></pre> 
    </div> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;configuration&gt;
  &lt;ci&gt;...&lt;/ci&gt;
  &lt;revapi&gt;
     ... HERE WE ARE ...
  &lt;/revapi&gt;
&lt;/configuration&gt;</code></pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>The Revapi configurations would only be read from the "…​ HERE WE ARE …​" part of the documents.</p> 
   </div> 
   <div class="paragraph"> 
    <p>Revapi itself uses this approach to track the changes made to its API across the versions using a single file. Each Revapi module can have a "api-changes.json" file in its base directory. The contents of this file follow this pattern:</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-javascript" data-lang="javascript">{
  "version1": {
    "revapi": {
      "ignore": [
        ...
      ]
    }
  },
  "version2": {
    "revapi": {
      "ignore": [
        ...
      ]
    }
  },
  ...
}</code></pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>I.e. in that file, the root elements are the released versions of revapi and under them there are configurations for revapi for the particular version to pass the build. Usually, this is just a list of ignored API changes - i.e. the API changes made in that release that are to be purposefully ignored by the tool so that the build passes. To make this work, revapi build contains this profile:</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;profile&gt;
    &lt;id&gt;api-check&lt;/id&gt;
    &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
    &lt;/activation&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
                &lt;artifactId&gt;build-helper-maven-plugin&lt;/artifactId&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;parse-version&lt;/id&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;parse-version&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;phase&gt;validate&lt;/phase&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;

            &lt;plugin&gt;
                &lt;groupId&gt;org.revapi&lt;/groupId&gt;
                &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${self-api-check.maven-version}&lt;/version&gt;
                &lt;dependencies&gt;
                    &lt;dependency&gt;
                        &lt;groupId&gt;org.revapi&lt;/groupId&gt;
                        &lt;artifactId&gt;revapi-java&lt;/artifactId&gt;
                        &lt;version&gt;${self-api-check.java-extension-version}&lt;/version&gt;
                    &lt;/dependency&gt;
                &lt;/dependencies&gt;
                &lt;configuration&gt;
                    &lt;failOnMissingConfigurationFiles&gt;false&lt;/failOnMissingConfigurationFiles&gt;
                    &lt;analysisConfigurationFiles&gt;
                        &lt;configurationFile&gt;
                            &lt;path&gt;api-changes.json&lt;/path&gt;
                            &lt;roots&gt;
                                &lt;root&gt;${parsedVersion.majorVersion}.${parsedVersion.minorVersion}.${parsedVersion.incrementalVersion}&lt;/root&gt;
                            &lt;/roots&gt;
                        &lt;/configurationFile&gt;
                    &lt;/analysisConfigurationFiles&gt;
                &lt;/configuration&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;api-check&lt;/id&gt;
                        &lt;goals&gt;&lt;goal&gt;check&lt;/goal&gt;&lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/profile&gt;</code></pre> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="reporting_with_revapi">Reporting With Revapi</h2> 
 <div class="sectionbody"> 
  <div class="sect2"> 
   <h3 id="report_per_module">Report Per Module</h3> 
   <div class="admonitionblock note"> 
    <table> 
     <tbody> 
      <tr> 
       <td class="icon"> 
        <div class="title">
          Note 
        </div> </td> 
       <td class="content"> Goal details page: <a href="report-mojo.html">here</a> </td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
   <div class="paragraph"> 
    <p>The Revapi Maven plugin offers the possibility to create simple reports of the API changes found in the analysis. The <a href="report-mojo.html">report goal</a> offers the same configuration properties as the analysis itself. Just include the following snippet in <code>reporting/plugins</code> of your POM:</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.revapi&lt;/groupId&gt;
    &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;...&lt;/version&gt;
    &lt;reportSets&gt;
        &lt;reportSet&gt;
            &lt;reports&gt;
                &lt;report&gt;report&lt;/report&gt;
            &lt;/reports&gt;
        &lt;/reportSet&gt;
    &lt;/reportSets&gt;
    ...
&lt;/plugin&gt;</code></pre> 
    </div> 
   </div> 
   <div class="paragraph"> 
    <p>The report can be configured in a very much the same way as the build-time API check and provides virtually the same configuration properties.</p> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="aggregate_report">Aggregate Report</h3> 
   <div class="admonitionblock note"> 
    <table> 
     <tbody> 
      <tr> 
       <td class="icon"> 
        <div class="title">
          Note 
        </div> </td> 
       <td class="content"> Goal details page: <a href="report-aggregate-mojo.html">here</a> </td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
   <div class="paragraph"> 
    <p>For POM-packaged modules, one can create an aggregate report consisting of the individual reports of the modules that are (indirectly) referenced by the POM module. Again this can be configured the same way the rest of the Revapi goals. Please consult the details page of the goal for the individual configuration properties.</p> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.revapi&lt;/groupId&gt;
    &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;...&lt;/version&gt;
    &lt;reportSets&gt;
        &lt;reportSet&gt;
            &lt;reports&gt;
                &lt;report&gt;report-aggregate&lt;/report&gt;
            &lt;/reports&gt;
        &lt;/reportSet&gt;
    &lt;/reportSets&gt;
    ...
&lt;/plugin&gt;</code></pre> 
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="comparing_specific_artifacts">Comparing Specific Artifacts</h2> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p>By default Revapi checks the currently built artifact against the latest released version of it. This actually is equivalent to running the maven plugin with the following set up:</p> 
  </div> 
  <div class="listingblock"> 
   <div class="content"> 
    <pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;org.revapi&lt;/groupId&gt;
  &lt;artifactId&gt;revapi-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;...&lt;/version&gt;
  &lt;configuration&gt;
    &lt;oldArtifacts&gt;
        &lt;artifact&gt;${project.groupId}:${project.artifactId}:RELEASE&lt;/artifact&gt;
    &lt;/oldArtifacts&gt;
    &lt;newArtifacts&gt;
        &lt;artifact&gt;${project.groupId}:${project.artifactId}:${project.version}&lt;/artifact&gt;
    &lt;/newArtifacts&gt;
  &lt;/configuration&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;goals&gt;&lt;goal&gt;check&lt;/goal&gt;&lt;/goals&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;</code></pre> 
   </div> 
  </div> 
  <div class="paragraph"> 
   <p>I.e. the <code>oldArtifacts</code> are set up to include the current project with the <code>RELEASE</code> version, which is Maven’s way of saying "this project in the latest released version". The <code>newArtifacts</code> specifies the currently built project.</p> 
  </div> 
  <div class="paragraph"> 
   <p>The above example implies a couple of things:</p> 
  </div> 
  <div class="ulist"> 
   <ul> 
    <li> <p>you can include more than one artifact to be included in the analysis</p> </li> 
    <li> <p>you don’t have to specify the "supplementary archives" - the dependencies of the artifacts are automatically obtained from Maven and used during the analysis so that the complete classpath is used</p> </li> 
    <li> <p>you’re not constrained to check the artifacts of the current project - in fact you could have a separate "check" module that would perform API checks completely separately from other modules in the project.</p> </li> 
   </ul> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="updating_version_in_code_pom_xml_code">Updating Version In <code>pom.xml</code></h2> 
 <div class="sectionbody"> 
  <div class="admonitionblock note"> 
   <table> 
    <tbody> 
     <tr> 
      <td class="icon"> 
       <div class="title">
         Note 
       </div> </td> 
      <td class="content"> Goal details page: <a href="update-versions-mojo.html">here</a> </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div class="paragraph"> 
   <p>Revapi needs two artifacts to compare against each other to determine the API differences and therefore the required version changes. By default the new artifact is the project being built so the artifacts need to be actually produced prior to running revapi. This is usually done in the <code>package</code> phase, which is therefore run prior to any Revapi goal.</p> 
  </div> 
  <div class="paragraph"> 
   <p>When updating the version, the plugin takes into consideration the configuration of Revapi as declared in the <code>pom.xml</code> but does not use certain extensions that would make some of the differences disappear (like the <a href="../revapi-basic-features/extensions/semver-ignore.html">semver-ignore extension</a>). This list of extensions is configurable using the <code>disallowedExtensions</code> configuration property, see the goal’s <a href="update-versions-mojo.html">detail page</a> for further info.</p> 
  </div> 
  <div class="paragraph"> 
   <p>For a single-module project, updating the versions is very simple:</p> 
  </div> 
  <div class="listingblock"> 
   <div class="content"> 
    <pre class="highlight"><code>mvn revapi:update-versions</code></pre> 
   </div> 
  </div> 
  <div class="paragraph"> 
   <p>The <code>version</code> in <code>pom.xml</code> will be updated according to the API changes and the semantic versioning rules.</p> 
  </div> 
  <div class="paragraph"> 
   <p>For multi-module project, one has more options. If each of the modules in the project is independently versioned, then the invocation is the same as for the single-module project, but if you version the child modules uniformly with the parent (i.e. you set <code>autoVersionSubmodules</code> to <code>true</code> when releasing using the maven release plugin), you should set the <code>singleVersionForAllModules</code> of revapi to <code>true</code>, too. Generally, <code>autoVersionSubmodules</code> and <code>singleVersionForAllModules</code> should be set to the same value.</p> 
  </div> 
  <div class="listingblock"> 
   <div class="content"> 
    <pre class="highlight"><code>mvn revapi:update-versions -Drevapi.singleVersionForAllModules=true</code></pre> 
   </div> 
  </div> 
  <div class="paragraph"> 
   <p>This will check the API differences in all the child modules and will determine the version of the whole based on the "biggest" change. I.e. if one child module breaks the API then the major version will be increased in all modules even though the rest of the child modules might not have changed at all.</p> 
  </div> 
 </div> 
</div> 
<div class="sect1"> 
 <h2 id="updating_versions_in_code_release_properties_code">Updating Versions In <code>release.properties</code></h2> 
 <div class="sectionbody"> 
  <div class="admonitionblock note"> 
   <table> 
    <tbody> 
     <tr> 
      <td class="icon"> 
       <div class="title">
         Note 
       </div> </td> 
      <td class="content"> Goal details page: <a href="update-release-properties-mojo.html">here</a> </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div class="paragraph"> 
   <p>This works identically to the <a href="#updating_version_in_code_pom_xml_code">update versions goal</a> but instead of updating the version directly in the <code>pom.xml</code> files, it creates or updates the <code>release.properties</code> file. This will then be read by the maven release plugin during the release process.</p> 
  </div> 
  <div class="paragraph"> 
   <p>Thus, running:</p> 
  </div> 
  <div class="listingblock"> 
   <div class="content"> 
    <pre class="highlight"><code>mvn revapi:update-release-properties &amp;&amp; mvn release:prepare</code></pre> 
   </div> 
  </div> 
  <div class="paragraph"> 
   <p>will automatically set the release and development versions for you according to the <a href="http://semver.org">semver</a> versioning rules.</p> 
  </div> 
 </div> 
</div>
			</div>
		</div>
		<div class="col-md-4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#revapi_maven_plugin" title="Revapi Maven Plugin">Revapi Maven Plugin <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li class="dropdown"><a href="#usage" title="Usage">Usage <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#examples" title="Examples">Examples</a>
			</ul>
		</li>
		<li class="dropdown"><a href="#specifying_versions_to_check" title="Specifying Versions To Check">Specifying Versions To Check <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#specific_old_version" title="Specific Old Version">Specific Old Version</a>
		<li><a href="#specific_new_version" title="Specific New Version">Specific New Version</a>
		<li><a href="#leaving_out_pre_releases" title="Leaving Out Pre-releases">Leaving Out Pre-releases</a>
			</ul>
		</li>
		<li class="dropdown"><a href="#how_to_configure_revapi" title="How to Configure Revapi">How to Configure Revapi <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li class="dropdown"><a href="#specifying_the_analysis_configuration_using_xml" title="Specifying The Analysis Configuration Using XML">Specifying The Analysis Configuration Using XML <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#ignoring_classes" title="Ignoring classes">Ignoring classes</a>
		<li><a href="#failing_level" title="Failing level">Failing level</a>
		<li><a href="#multiple_configurations_per_extension" title="Multiple Configurations Per Extension">Multiple Configurations Per Extension</a>
		<li><a href="#analysis_configuration_and_maven_inheritance" title="Analysis Configuration And Maven Inheritance">Analysis Configuration And Maven Inheritance</a>
		<li><a href="#one_configuration_per_extension" title="One Configuration Per Extension">One Configuration Per Extension</a>
		<li><a href="#multiple_configurations_per_extension_2" title="Multiple Configurations Per Extension">Multiple Configurations Per Extension</a>
			</ul>
		</li>
		<li class="dropdown"><a href="#specifying_the_analysis_configuration_using_json" title="Specifying The Analysis Configuration Using JSON">Specifying The Analysis Configuration Using JSON <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#the_json_configuration_format" title="The JSON Configuration Format">The JSON Configuration Format</a>
		<li><a href="#the_legacy_json_configuration_format" title="The Legacy JSON Configuration Format">The Legacy JSON Configuration Format</a>
			</ul>
		</li>
			</ul>
		</li>
		<li><a href="#evolving_the_library_using_semver_rules" title="Evolving The Library Using Semver Rules">Evolving The Library Using Semver Rules</a>
		<li class="dropdown"><a href="#multi_file_configuration" title="Multi-file Configuration">Multi-file Configuration <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#using_configuration_defined_in_other_modules" title="Using Configuration Defined In Other Modules">Using Configuration Defined In Other Modules</a>
		<li><a href="#merging_configuration_from_multiple_files" title="Merging Configuration From Multiple Files">Merging Configuration From Multiple Files</a>
		<li><a href="#custom_root_element_of_configuration" title="Custom Root Element of Configuration">Custom Root Element of Configuration</a>
			</ul>
		</li>
		<li class="dropdown"><a href="#reporting_with_revapi" title="Reporting With Revapi">Reporting With Revapi <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#report_per_module" title="Report Per Module">Report Per Module</a>
		<li><a href="#aggregate_report" title="Aggregate Report">Aggregate Report</a>
			</ul>
		</li>
		<li><a href="#comparing_specific_artifacts" title="Comparing Specific Artifacts">Comparing Specific Artifacts</a>
		<li><a href="#updating_version_in_code_pom_xml_code" title="Updating Version In pom.xml">Updating Version In pom.xml</a>
		<li><a href="#updating_versions_in_code_release_properties_code" title="Updating Versions In release.properties">Updating Versions In release.properties</a>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="col-md-3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Basic Info</li>
						<li >
							<a href="../../architecture.html" title="Architecture">Architecture</a>
						</li>
						<li >
							<a href="../../building.html" title="Building">Building</a>
						</li>
						<li >
							<a href="../../extensions.html" title="Extensions">Extensions</a>
						</li>
						<li class="nav-header">Sub Projects</li>
						<li >
							<a href="../revapi/index.html" title="Revapi API">Revapi API</a>
						</li>
						<li >
							<a href="../revapi-ant-task/index.html" title="Ant Task">Ant Task</a>
						</li>
						<li >
							<a href="../revapi-basic-features/index.html" title="Basic Features">Basic Features</a>
						</li>
						<li >
							<a href="../revapi-java/index.html" title="Java Extension">Java Extension</a>
						</li>
						<li >
							<a href="../revapi-java-spi/index.html" title="Java Extension SPI">Java Extension SPI</a>
						</li>
						<li >
							<a href="../revapi-java-test-support/index.html" title="Java Test Support">Java Test Support</a>
						</li>
						<li >
							<a href="../revapi-reporter-text/index.html" title="Text Report Extension">Text Report Extension</a>
						</li>
						<li class="active">
							<a href="#" title="Maven Plugin">Maven Plugin</a>
						</li>
					</ul>
				</div>
				<div class="col-md-3 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
				<div class="col-md-3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Maven Documentation</li>
						<li >
							<a href="project-info.html" title="Project Information">Project Information <i class="glyphicon glyphicon-chevron-down"></i></a>
							<ul class="nav nav-list">
						<li class="active">
							<a href="#" title="About">About</a>
						</li>
						<li >
							<a href="license.html" title="Project License">Project License</a>
						</li>
						<li >
							<a href="mail-lists.html" title="Mailing Lists">Mailing Lists</a>
						</li>
						<li >
							<a href="issue-tracking.html" title="Issue Tracking">Issue Tracking</a>
						</li>
						<li >
							<a href="source-repository.html" title="Source Repository">Source Repository</a>
						</li>
						<li >
							<a href="team-list.html" title="Project Team">Project Team</a>
						</li>
						<li >
							<a href="integration.html" title="Continuous Integration">Continuous Integration</a>
						</li>
							</ul>
						</li>
						<li >
							<a href="project-reports.html" title="Project Reports">Project Reports <i class="glyphicon glyphicon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
				<div class="col-md-3 bottom-description">
					<blockquote>Revapi Maven Plugin</blockquote>
					<blockquote class="version-date"><span class="projectVersion">Version: 0.10.1</span><br/><span class="publishDate">Last Published: 2018-04-06</span></blockquote>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="col-md-12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2014-2018 <a href="http://lukas.krejci.pw">Lukas Krejci</a>. All Rights Reserved.</p>
				<p><a href="http://github.com/tunguski/msb3-maven-skin" title="Msb3 Maven skin">Msb3 Maven skin</a> by <a href="http://matsuo.pl" target="_blank" title="Marek Romanowski">Marek Romanowski</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="./js/msb3-scroll.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/highlight.min.js"></script>
	
<script async="true" src="//revapi-org.disqus.com/count.js" id="dsq-count-scr"></script>
	<script src="./js/msb3-skin.js"></script>

	</body>
</html>